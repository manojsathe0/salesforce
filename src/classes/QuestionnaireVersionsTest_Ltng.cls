/*
Migration of Questionnaire Versions functionality to Salesforce
Story: B-22668, B-22671
By Artyom M.
*/

@isTest
public class QuestionnaireVersionsTest_Ltng {
    static testMethod void testGetQuestionnaireVersionsByProcessingNumber() {
        String processingNumber = '123456';
        String responseBody = '{"versions": [{"revision": 0, "orderId": 123 ,"subRevision": 0,"questionnaire": 27,"dateCreated": "2018-02-27T23:15:01.603Z","createdBy": "proc_BankAnswersIII"}]}';
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 200;
        
        Test.setMock(HttpCalloutMock.class, mock);
        
        QuestionnaireVersionsController_Ltng.getQuestionnaireVersionsByProcessingNumber(processingNumber,'123');
        
    }
    
    static testMethod void testGetQuestionnaireByProcessingNumber() {
        String processingNumber = '123456';
        String responseBody = '{ "questionnaireFieldGroupAnswers": { "userOrderId": 507704077, "createdBy": null, "isMajorRevision": false, "fieldAnswers": [ { "fieldId": 8244, "fieldName": "Alternative_Name_1", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8243, "fieldName": "LLC_name", "fieldValue": "324234324, LLC", "optionId": null, "responseType": 0 }, { "fieldId": 286084, "fieldName": "LLC_name_RO", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292214, "fieldName": "managed_owner_MC", "fieldValue": "Solely by the owner (Member-managed)", "optionId": 430658, "responseType": 0 }, { "fieldId": 252418, "fieldName": "manufacture_sell_alcohol", "fieldValue": "No", "optionId": 266859, "responseType": 0 }, { "fieldId": 8275, "fieldName": "name_of_officer", "fieldValue": "asde23e3", "optionId": null, "responseType": 0 }, { "fieldId": 292199, "fieldName": "number_owners_MC", "fieldValue": "1 owner", "optionId": 432297, "responseType": 0 }, { "fieldId": 251977, "fieldName": "other_other_activity_detailed", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292202, "fieldName": "owner_name", "fieldValue": "asde23e3", "optionId": null, "responseType": 0 }, { "fieldId": 8277, "fieldName": "phone___of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8253, "fieldName": "registered_agent", "fieldValue": "LegalZoom will serve as my registered agent.", "optionId": 134950, "responseType": 0 }, { "fieldId": 8279, "fieldName": "SSN_of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8411, "fieldName": "sState", "fieldValue": "Alabama", "optionId": 182626, "responseType": 0 }, { "fieldId": 8282, "fieldName": "Trade_name", "fieldValue": "No", "optionId": 236893, "responseType": 0 }, { "fieldId": 250480, "fieldName": "gambling_wagering", "fieldValue": "No", "optionId": 236908, "responseType": 0 }, { "fieldId": 250479, "fieldName": "vehicle_taxgross_weight", "fieldValue": "No", "optionId": 236901, "responseType": 0 }, { "fieldId": 8849, "fieldName": "LLC_type", "fieldValue": "No", "optionId": 290133, "responseType": 0 }, { "fieldId": 8241, "fieldName": "new_or_convert_business", "fieldValue": "Form a new LLC", "optionId": 238859, "responseType": 0 }, { "fieldId": 8242, "fieldName": "EIN_", "fieldValue": "Yes, please obtain my tax identification number for me.", "optionId": 310190, "responseType": 0 }, { "fieldId": 8287, "fieldName": "Hire_employees_", "fieldValue": "No", "optionId": 236896, "responseType": 0 }, { "fieldId": 8248, "fieldName": "business_county", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8259, "fieldName": "percentage_or_units", "fieldValue": "Percentage", "optionId": 182683, "responseType": 0 }, { "fieldId": 292203, "fieldName": "owner_title_MC", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8276, "fieldName": "title_of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8270, "fieldName": "transfer_of_LLC_units", "fieldValue": "Ownership interests are freely transferable.", "optionId": 134646, "responseType": 0 }, { "fieldId": 8261, "fieldName": "Management_of_LLC", "fieldValue": "By its single member.", "optionId": 322943, "responseType": 0 }, { "fieldId": 294773, "fieldName": "package_MC", "fieldValue": "NULL", "optionId": 438977, "responseType": 0 }, { "fieldId": 259069, "fieldName": "business_purpose", "fieldValue": "Other", "optionId": 292216, "responseType": 0 }, { "fieldId": 263666, "fieldName": "forms_subs_opt_in", "fieldValue": "Yes, include my free forms and enroll me in Business Advantage", "optionId": 343055, "responseType": 0 }, { "fieldId": 268038, "fieldName": "fiscal_yr_end_month", "fieldValue": "December", "optionId": 356169, "responseType": 0 }, { "fieldId": 268039, "fieldName": "fiscal_yr_end_day", "fieldValue": "31", "optionId": 356201, "responseType": 0 }, { "fieldId": 8245, "fieldName": "Alternative_Name_2", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292555, "fieldName": "AMEX_BGR_CB", "fieldValue": "No", "optionId": null, "responseType": 0 }, { "fieldId": 292556, "fieldName": "AMEX_SimplyCash_CB", "fieldValue": "No", "optionId": null, "responseType": 0 }, { "fieldId": 294830, "fieldName": "b3pay", "fieldValue": "No", "optionId": 439151, "responseType": 0 }, { "fieldId": 292686, "fieldName": "b5in5", "fieldValue": "NULL", "optionId": 433073, "responseType": 0 }, { "fieldId": 292809, "fieldName": "b5in5_Price", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 277213, "fieldName": "bankofamerica_offer_MC", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 295344, "fieldName": "bBizFilterVersion", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292554, "fieldName": "biz_license_pkg_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 294760, "fieldName": "bPaychex", "fieldValue": "No", "optionId": 438952, "responseType": 0 }, { "fieldId": 271475, "fieldName": "bShowTest2", "fieldValue": "LZ_LLC_BL_Price_Test_Control", "optionId": 441569, "responseType": 0 }, { "fieldId": 8246, "fieldName": "business_address", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8247, "fieldName": "business_city_state_zip", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 291727, "fieldName": "business_phone", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8249, "fieldName": "business_state", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8250, "fieldName": "business_zip", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 294618, "fieldName": "combined_bapstates", "fieldValue": "TRUE", "optionId": 438580, "responseType": 0 }, { "fieldId": 292498, "fieldName": "combined_compliance_cal", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 295097, "fieldName": "combined_compliance_essential_any", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292152, "fieldName": "combined_compliance_no", "fieldValue": "TRUE", "optionId": 439584, "responseType": 0 }, { "fieldId": 295571, "fieldName": "combined_prof_not_CT", "fieldValue": "TRUE", "optionId": 440951, "responseType": 0 }, { "fieldId": 292820, "fieldName": "combined_showcompliance", "fieldValue": "BAPSTATES", "optionId": 441187, "responseType": 0 }, { "fieldId": 292148, "fieldName": "compliance_BAP_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292149, "fieldName": "compliance_BAS_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292150, "fieldName": "compliance_no_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292553, "fieldName": "CTN_consult_MC", "fieldValue": "Yes, I would like to learn about reducing my tax expenses", "optionId": 433022, "responseType": 0 }, { "fieldId": 8252, "fieldName": "Dissolve_or_Perpetual_", "fieldValue": "No", "optionId": 292311, "responseType": 0 }, { "fieldId": 292557, "fieldName": "DUNS_consult_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 250481, "fieldName": "file_form720", "fieldValue": "No", "optionId": 236910, "responseType": 0 }, { "fieldId": 8268, "fieldName": "stockholders", "fieldValue": "1", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "POST_OPTION", "fieldValue": "7", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "SHIPPING_METHOD", "fieldValue": "0", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "LZ_STATE_ID", "fieldValue": "51", "optionId": null, "responseType": 0 } ], "groupAnswers": [ { "groupId": 8268, "groupName": "stockholders", "fieldId": 54856, "fieldName": "stockholders_capital_1", "fieldValue": "", "optionId": null, "groupIndex": 1 }, { "groupId": 8268, "groupName": "stockholders", "fieldId": 54855, "fieldName": "stockholders_Name_1", "fieldValue": "asde23e3", "optionId": null, "groupIndex": 1 }, { "groupId": 8268, "groupName": "stockholders", "fieldId": 54857, "fieldName": "stockholders_Percentage_1", "fieldValue": "100%", "optionId": null, "groupIndex": 1 } ] } }';
        
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 200;
        
        Test.setMock(HttpCalloutMock.class, mock);
        
        QuestionnaireVersionsController_Ltng.getQuestionnaireByProcessingNumber(processingNumber, 0, 0);
        
    }
    
    
    static testMethod void testGetQuestionnaireVersionsByProcessingNumberError() {
        String processingNumber = '123456';
        String responseBody;
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 200;
        //Test.setMock(HttpCalloutMock.class, new IADTestMockGenerator());
        Test.setMock(HttpCalloutMock.class, mock);
        //HttpResponse response = new HttpResponse();
        //response.setBody(responseBody);
        //response.setStatusCode(200);
        QuestionnaireVersionsController_Ltng.getQuestionnaireVersionsByProcessingNumber(processingNumber,'12');
        
    }
    
    static testMethod void testGetQuestionnaireByProcessingNumberError() {
        String processingNumber = '123456';
        String responseBody; 
        
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 200;
        
        Test.setMock(HttpCalloutMock.class, mock);
        
        QuestionnaireVersionsController_Ltng.getQuestionnaireByProcessingNumber(processingNumber, 0, 0);
        
    }
    
    static testMethod void testGetQuestionnaireVersionsByProcessingNumberError2() {
        String processingNumber = '123456';
        String responseBody = '{"versions": [{"revision": 0,"subRevision": 0,"questionnaire": 27,"dateCreated": "2018-02-27T23:15:01.603Z","createdBy": "proc_BankAnswersIII"}]}';
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 204;
        
        Test.setMock(HttpCalloutMock.class, mock);
        
        QuestionnaireVersionsController_Ltng.getQuestionnaireVersionsByProcessingNumber(processingNumber,'123');
        
    }
    
    static testMethod void testGetQuestionnaireByProcessingNumberError2() {
        String processingNumber = '123456';
        String responseBody = '{ "questionnaireFieldGroupAnswers": { "userOrderId": 507704077, "createdBy": null, "isMajorRevision": false, "fieldAnswers": [ { "fieldId": 8244, "fieldName": "Alternative_Name_1", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8243, "fieldName": "LLC_name", "fieldValue": "324234324, LLC", "optionId": null, "responseType": 0 }, { "fieldId": 286084, "fieldName": "LLC_name_RO", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292214, "fieldName": "managed_owner_MC", "fieldValue": "Solely by the owner (Member-managed)", "optionId": 430658, "responseType": 0 }, { "fieldId": 252418, "fieldName": "manufacture_sell_alcohol", "fieldValue": "No", "optionId": 266859, "responseType": 0 }, { "fieldId": 8275, "fieldName": "name_of_officer", "fieldValue": "asde23e3", "optionId": null, "responseType": 0 }, { "fieldId": 292199, "fieldName": "number_owners_MC", "fieldValue": "1 owner", "optionId": 432297, "responseType": 0 }, { "fieldId": 251977, "fieldName": "other_other_activity_detailed", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292202, "fieldName": "owner_name", "fieldValue": "asde23e3", "optionId": null, "responseType": 0 }, { "fieldId": 8277, "fieldName": "phone___of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8253, "fieldName": "registered_agent", "fieldValue": "LegalZoom will serve as my registered agent.", "optionId": 134950, "responseType": 0 }, { "fieldId": 8279, "fieldName": "SSN_of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8411, "fieldName": "sState", "fieldValue": "Alabama", "optionId": 182626, "responseType": 0 }, { "fieldId": 8282, "fieldName": "Trade_name", "fieldValue": "No", "optionId": 236893, "responseType": 0 }, { "fieldId": 250480, "fieldName": "gambling_wagering", "fieldValue": "No", "optionId": 236908, "responseType": 0 }, { "fieldId": 250479, "fieldName": "vehicle_taxgross_weight", "fieldValue": "No", "optionId": 236901, "responseType": 0 }, { "fieldId": 8849, "fieldName": "LLC_type", "fieldValue": "No", "optionId": 290133, "responseType": 0 }, { "fieldId": 8241, "fieldName": "new_or_convert_business", "fieldValue": "Form a new LLC", "optionId": 238859, "responseType": 0 }, { "fieldId": 8242, "fieldName": "EIN_", "fieldValue": "Yes, please obtain my tax identification number for me.", "optionId": 310190, "responseType": 0 }, { "fieldId": 8287, "fieldName": "Hire_employees_", "fieldValue": "No", "optionId": 236896, "responseType": 0 }, { "fieldId": 8248, "fieldName": "business_county", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8259, "fieldName": "percentage_or_units", "fieldValue": "Percentage", "optionId": 182683, "responseType": 0 }, { "fieldId": 292203, "fieldName": "owner_title_MC", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8276, "fieldName": "title_of_officer", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8270, "fieldName": "transfer_of_LLC_units", "fieldValue": "Ownership interests are freely transferable.", "optionId": 134646, "responseType": 0 }, { "fieldId": 8261, "fieldName": "Management_of_LLC", "fieldValue": "By its single member.", "optionId": 322943, "responseType": 0 }, { "fieldId": 294773, "fieldName": "package_MC", "fieldValue": "NULL", "optionId": 438977, "responseType": 0 }, { "fieldId": 259069, "fieldName": "business_purpose", "fieldValue": "Other", "optionId": 292216, "responseType": 0 }, { "fieldId": 263666, "fieldName": "forms_subs_opt_in", "fieldValue": "Yes, include my free forms and enroll me in Business Advantage", "optionId": 343055, "responseType": 0 }, { "fieldId": 268038, "fieldName": "fiscal_yr_end_month", "fieldValue": "December", "optionId": 356169, "responseType": 0 }, { "fieldId": 268039, "fieldName": "fiscal_yr_end_day", "fieldValue": "31", "optionId": 356201, "responseType": 0 }, { "fieldId": 8245, "fieldName": "Alternative_Name_2", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292555, "fieldName": "AMEX_BGR_CB", "fieldValue": "No", "optionId": null, "responseType": 0 }, { "fieldId": 292556, "fieldName": "AMEX_SimplyCash_CB", "fieldValue": "No", "optionId": null, "responseType": 0 }, { "fieldId": 294830, "fieldName": "b3pay", "fieldValue": "No", "optionId": 439151, "responseType": 0 }, { "fieldId": 292686, "fieldName": "b5in5", "fieldValue": "NULL", "optionId": 433073, "responseType": 0 }, { "fieldId": 292809, "fieldName": "b5in5_Price", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 277213, "fieldName": "bankofamerica_offer_MC", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 295344, "fieldName": "bBizFilterVersion", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292554, "fieldName": "biz_license_pkg_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 294760, "fieldName": "bPaychex", "fieldValue": "No", "optionId": 438952, "responseType": 0 }, { "fieldId": 271475, "fieldName": "bShowTest2", "fieldValue": "LZ_LLC_BL_Price_Test_Control", "optionId": 441569, "responseType": 0 }, { "fieldId": 8246, "fieldName": "business_address", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8247, "fieldName": "business_city_state_zip", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 291727, "fieldName": "business_phone", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8249, "fieldName": "business_state", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 8250, "fieldName": "business_zip", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 294618, "fieldName": "combined_bapstates", "fieldValue": "TRUE", "optionId": 438580, "responseType": 0 }, { "fieldId": 292498, "fieldName": "combined_compliance_cal", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 295097, "fieldName": "combined_compliance_essential_any", "fieldValue": "", "optionId": null, "responseType": 0 }, { "fieldId": 292152, "fieldName": "combined_compliance_no", "fieldValue": "TRUE", "optionId": 439584, "responseType": 0 }, { "fieldId": 295571, "fieldName": "combined_prof_not_CT", "fieldValue": "TRUE", "optionId": 440951, "responseType": 0 }, { "fieldId": 292820, "fieldName": "combined_showcompliance", "fieldValue": "BAPSTATES", "optionId": 441187, "responseType": 0 }, { "fieldId": 292148, "fieldName": "compliance_BAP_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292149, "fieldName": "compliance_BAS_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292150, "fieldName": "compliance_no_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 292553, "fieldName": "CTN_consult_MC", "fieldValue": "Yes, I would like to learn about reducing my tax expenses", "optionId": 433022, "responseType": 0 }, { "fieldId": 8252, "fieldName": "Dissolve_or_Perpetual_", "fieldValue": "No", "optionId": 292311, "responseType": 0 }, { "fieldId": 292557, "fieldName": "DUNS_consult_CB", "fieldValue": "2", "optionId": null, "responseType": 0 }, { "fieldId": 250481, "fieldName": "file_form720", "fieldValue": "No", "optionId": 236910, "responseType": 0 }, { "fieldId": 8268, "fieldName": "stockholders", "fieldValue": "1", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "POST_OPTION", "fieldValue": "7", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "SHIPPING_METHOD", "fieldValue": "0", "optionId": null, "responseType": 0 }, { "fieldId": null, "fieldName": "LZ_STATE_ID", "fieldValue": "51", "optionId": null, "responseType": 0 } ], "groupAnswers": [ { "groupId": 8268, "groupName": "stockholders", "fieldId": 54856, "fieldName": "stockholders_capital_1", "fieldValue": "", "optionId": null, "groupIndex": 1 }, { "groupId": 8268, "groupName": "stockholders", "fieldId": 54855, "fieldName": "stockholders_Name_1", "fieldValue": "asde23e3", "optionId": null, "groupIndex": 1 }, { "groupId": 8268, "groupName": "stockholders", "fieldId": 54857, "fieldName": "stockholders_Percentage_1", "fieldValue": "100%", "optionId": null, "groupIndex": 1 } ] } }';
        
        IADTestMockGenerator mock = new IADTestMockGenerator();
        mock.testBody = responseBody;
        mock.statusCode = 204;
        
        Test.setMock(HttpCalloutMock.class, mock);
        
        QuestionnaireVersionsController_Ltng.getQuestionnaireByProcessingNumber(processingNumber, 0, 0);
        
    }
}